# 3.1 Servicio de Directorio

## 1. Planificación de la fusión de directorios LDAP

LDAP no permite renombrar directamente entradas que contienen subentradas  
(por ejemplo, una *organizationalUnit* con usuarios dentro). Intentar cambiar  
atributos como `dn`, `dc` u `ou` de forma directa provoca errores de integridad.

Para realizar una fusión de dos directorios, lo más cómodo es:

1. Exportar el directorio **B**.
2. Modificarlo para adaptarlo a la estructura del directorio **A**.
3. Importarlo posteriormente en el directorio **A**.

---

## 2. Creación de un archivo LDIF

Se utiliza la clase **inetOrgPerson**, ya que permite almacenar toda la información necesaria.  
Lo más importante es que el archivo empiece por `dn`.

```ldif
dn: cn=Marc Freixas Cordomí,ou=contactes,dc=empresa,dc=com
objectClass: inetOrgPerson
cn: Marc Freixas Cordomí
givenName: Marc
sn: Freixas Cordomí
homePhone: 931234567
mobile: 666789012
telephoneNumber: 930987654
o: Empresa SL
postalAddress: Carrer Joaquim Costa, 17
postalCode: 08001
l: Barcelona
mail: mfreixas@empresa.com
```

---

## 3. Modificación de un archivo LDIF

```ldif
dn: cn=Marc Freixas Cordomí,ou=contactes,dc=empresa,dc=com
changetype: modify

delete: homePhone
-

replace: postalAddress
postalAddress: Carrer Jaume Isern, 56
-

replace: postalCode
postalCode: 08304
-

replace: l
l: Mataró
```
